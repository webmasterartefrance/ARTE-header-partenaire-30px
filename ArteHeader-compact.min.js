(function(a){var b=function(C,z){var g="ArteHeader-compact.js";var m=g.substr(0,g.lastIndexOf("/")+1);var t="https:"==document.location.protocol?"https://www-secure.arte.tv":"http://www.arte.tv";var k=a.extend({current:"none",menu:false,lang:"fr",pushContent:false,socialButtons:true,compact:false,css:"assets/css/arte-header.css",cssCompact:m+"assets/css/arte-header-compact.css"},z),y=this,B='<div class="arte-header-wrapper"> <a class="arte-header-logo" href="http://www.arte.tv/"></a> <div class="arte-header-current"></div> <div class="arte-header-menu">     <ul class="arte-header-menu-col1">         <li><a class="color-direct" data-keyword="direct" href=""></a></li>         <li><a class="color-programmes" data-keyword="programmes" href=""></a></li>         <li><a class="color-plus7" data-keyword="plus7" href=""></a></li>         <li><a class="color-vod" data-keyword="vod" href=""></a></li>   <li><a class="color-info" data-keyword="info" href=""></a></li>   </ul>     <ul class="arte-header-menu-col2">         <li><a class="color-future" data-keyword="future" href=""></a></li>         <li><a class="color-creative" data-keyword="creative" href=""></a></li>         <li><a class="color-liveweb" data-keyword="liveweb" href=""></a></li>     </ul> </div> <div class="arte-header-autopromo">     <div class="arte-header-langs">         <ul class="arte-header-lang">             <li><a lang="fr" href="">FR</a> |</li>             <li><a lang="de" href="">DE</a> | </li>    <li><a lang="en" href="">EN</a></li>      </ul>         <ul class="arte-header-social">             <li><a href="" class="arte-header-fb"></a></li>             <li><a href="" class="arte-header-tw"></a></li>             <li><a href="" class="arte-header-go"><div class="g-plusone" data-size="small" data-annotation="none"></div></a></li>         </ul>     </div>     <div class="arte-header-textpromo">     </div> </div></div><a href="/" class="arte-header-toggle"></a>',D=false,f=a(C),s,w,E,q,h,v,j,l,n={fr:{direct:"DIRECT",programmes:"PROGRAMMES",plus7:"+7",vod:"VOD DVD",future:"FUTURE",creative:"CREATIVE",liveweb:"LIVE WEB",link_direct:"http://www.arte.tv/direct",link_programmes:"http://www.arte.tv/programmes",link_plus7:"http://www.arte.tv/guide/fr/plus7",link_vod:"http://www.arte.tv/vod",link_future:"http://future.arte.tv/fr",link_creative:"http://creative.arte.tv/fr",link_liveweb:"http://liveweb.arte.tv/fr",link_arte:"http://www.arte.tv/fr",link_info:"http://info.arte.tv/fr",keywords:{direct:"fr_direct",programmes:"fr_programmes",plus7:"fr_plus7",vod:"fr_vod",future:"fr_future",creative:"fr_creative",liveweb:"fr_liveweb",info:"fr_info",none:"fr_home"}},de:{direct:"LIVE",programmes:"TV-PROGRAMM",plus7:"+7",vod:"EDITION",future:"FUTURE",creative:"CREATIVE",liveweb:"LIVE WEB",link_direct:"http://www.arte.tv/live",link_programmes:"http://www.arte.tv/programm",link_plus7:"http://www.arte.tv/guide/de/plus7",link_vod:"http://www.arte-edition.de/",link_future:"http://future.arte.tv/de",link_creative:"http://creative.arte.tv/de",link_liveweb:"http://liveweb.arte.tv/de",link_info:"http://info.arte.tv/de",link_arte:"http://www.arte.tv/de",keywords:{direct:"de_direct",programmes:"de_programmes",plus7:"de_plus7",vod:"de_vod",future:"de_future",creative:"de_creative",liveweb:"de_liveweb",info:"de_info",none:"de_home"}},en:{direct:"LIVE",programmes:"TV-PROGRAMM",plus7:"+7",vod:"EDITION",future:"FUTURE",creative:"CREATIVE",liveweb:"LIVE WEB",link_direct:"http://www.arte.tv/live",link_programmes:"http://www.arte.tv/programm",link_plus7:"http://www.arte.tv/guide/en/plus7",link_vod:"http://www.arte.tv/vod",link_future:"http://future.arte.tv/en",link_creative:"http://creative.arte.tv/en",link_liveweb:"http://liveweb.arte.tv/en",link_info:"http://info.arte.tv/en",link_arte:"http://www.arte.tv/en",keywords:{direct:"en_direct",programmes:"en_programmes",plus7:"en_plus7",vod:"en_vod",future:"en_future",creative:"en_creative",liveweb:"en_liveweb",info:"en_info",none:"en_home"}}},c=function(F){return n[k.lang][F]},r=function(F){F.preventDefault();if(!D){q.addClass("selected");s.addClass("arte-header-menu-open")}else{q.removeClass("selected");s.removeClass("arte-header-menu-open")}D=!D},u=function(){var F=(k.current=="none")?"":k.current;h.attr("class","arte-header-current "+F);if(k.lang=="de"){h.addClass("de")}s.find("ul li a").removeClass("selected");a("div.arte-header-current").hide().fadeIn(500);if(F.length>0){s.find('ul li a[class*="color-'+F+'"]').addClass("selected")}},x=function(){if(false===k.menu){return}if(a(window).width()>=730){E.css({display:"block"})}else{E.css({display:"none"})}},d=function(){if(false!==k.menu){var F="";s.prepend('<ul class="arte-header-menu-responsive"></ul>');a.each(k.menu,function(G,H){if(H.hasOwnProperty("label")){F+="<li>"+a("<a>"+H.label+"</a>").attr(H.attr)[0].outerHTML+"</li>"}else{if(H.hasOwnProperty("html")){F+="<li>"+H.html+"</li>"}}});w=f.find("ul.arte-header-menu-responsive");w.html(F)}},o=function(G){var F=G.data("keyword");xt_med("C","26",F,"N");window.location=G.attr("href")},i=function(){if(typeof xt_med!="undefined"){a(".arte-header-menu li a").bind("click",function(F){F.preventDefault();o(a(this))})}},p=function(){if(false!==k.socialButtons){if(typeof window.___gcfg=="undefined"){window.___gcfg={lang:k.lang};var F=document.createElement("script");F.src="https://apis.google.com/js/plusone.js";F.async=true;document.getElementsByTagName("head")[0].appendChild(F)}a("a.arte-header-fb").bind("click",function(G){G.preventDefault();window.open("http://www.facebook.com/sharer.php?u="+encodeURIComponent(window.location.href)+"&t="+encodeURIComponent(""),"facebook","toolbar=0,status=0,width=900,height=626")});a("a.arte-header-tw").bind("click",function(G){G.preventDefault();window.open("http://twitter.com/home?status="+encodeURIComponent(window.location.href),"twitter","toolbar=0,status=0,width=626,height=436")})}else{f.find("ul.arte-header-social").hide()}},e=function(){var F=function(){var G=document.createElement("script");G.src="http://www.arte.tv/header-arte/dev/assets/js/jquery.xdomainajax.jquery.1.9.compatible.js";var H=document.getElementsByTagName("head")[0],I=false;G.onload=G.onreadystatechange=function(){if(!I&&(!this.readyState||this.readyState=="loaded"||this.readyState=="complete")){I=true;G.onload=G.onreadystatechange=null;H.removeChild(G);var M="",L=c("keywords"),J=(k.current.length==0)?"none":k.current,K=function(){var N=new Date(),P=N.getMinutes(),O=N.getHours();P=P<10?"0"+P:P;O=O<10?"0"+O:O;return""+O+P};if(L.hasOwnProperty(J)){a.ajax({url:"http://www.arte.tv/sites/autopromo/category/"+L[J]+"/?nocache="+K(),dataType:"json",cache:(window.navigator.appName!="Microsoft Internet Explorer"),error:function(P,O,N){if(typeof console!="undefined"){console.log(P,O,N)}},success:function(N){if(N.success){f.find(".arte-header-textpromo").html('<div class="autopromo_livepreview">'+N.data.autopromo_html+"</div>");a("#arte-header div.autopromo_livepreview a").bind("click",function(O){if(typeof xt_med!="undefined"){O.preventDefault();xt_med("C","26",encodeURIComponent(a(this).attr("href"))+"_"+N.data.autopromo_category,"N");window.location=a(this).attr("href")}})}}})}}};H.appendChild(G)};if(arguments.length==1&&arguments[0]===true){F()}else{a(window).load(function(G){F()})}},A=function(H){if(a('head link[href="'+k.css+'"]').length<=0){a("head").append('<link rel="stylesheet" href="'+k.css+'" type="text/css" id="arte-header-css"/>')}if(k.compact&&a('head link[href="'+k.cssCompact+'"]').length<=0){a("head").append('<link rel="stylesheet" href="'+k.cssCompact+'" type="text/css" id="arte-header-css-compact"/>')}f.hide();f.html(H);s=f.find("div.arte-header-menu");w=f.find("ul.arte-header-menu-responsive");E=f.find("div.arte-header-menu ul.arte-header-menu-col1, div.arte-header-menu ul.arte-header-menu-col2");q=f.find("a.arte-header-toggle");h=f.find("div.arte-header-current");v=f.find("div.arte-header-langs");j=f.find(".arte-header-menu-col1");l=f.find(".arte-header-menu-col2");s.find("ul li a").each(function(I,J){var K=a(this).attr("class").replace("color-","");a(this).html(c(K)).attr("href",c("link_"+K))});v.find("ul li a").removeClass("selected");v.find('ul li a[lang="'+k.lang+'"]').addClass("selected");if(k.pushContent&&!k.compact){var F;r=function(I){I.preventDefault();if(!D){q.addClass("selected");s.height(F)}else{q.removeClass("selected");s.height(0)}D=!D};x=function(){if(a(window).width()>=730){s.removeClass("push-menu");s.css({height:"auto"});E.css({display:"block"})}else{if(!k.menu){F=j.outerHeight(true)+l.outerHeight(true)+w.outerHeight(true)}else{F=w.height();E.css({display:"none"})}s.addClass("push-menu");var I=!D?0:F;s.height(I)}};s.addClass("arte-header-menu-open")}q.bind("click",function(I){r(I)});var G=c("link_"+k.current);if(G!=undefined){a(".arte-header-current").css({cursor:"pointer"}).bind("click",function(I){window.location=G})}f.find("a.arte-header-logo").attr("href",c("link_arte"));u();d();i();p();if(!k.compact){e()}a(window).resize(x);x();f.show()};A(B);this.handleAutopromo=e;this.updateLangHref=function(G,H){var F=f.find('div.arte-header-autopromo div.arte-header-langs ul.arte-header-lang li a[lang="'+G+'"]');if(F.length>0){F.attr("href",H)}else{this.addLang(G.toUpperCase(),H,false)}return this};this.addLang=function(H,G,F){a(".arte-header-lang li:last a").after("|");if(F){a(".arte-header-lang li a").removeClass("selected")}a(".arte-header-lang").append("<li><a"+((F)?' class="selected"':"")+' lang="'+H.toLowerCase()+'" href="'+G+'">'+H+"</a></li>")};this.setCurrentResponsive=function(F){f.find("ul.arte-header-menu-responsive li a").removeClass("selected");f.find("ul.arte-header-menu-responsive li:eq("+F+") a").addClass("selected");return this};this.updateLangLabel=function(F,G){f.find('div.arte-header-autopromo div.arte-header-langs ul.arte-header-lang li a[lang="'+F+'"]').html(G);return this};this.hideLang=function(F){if(typeof F=="undefined"){f.find("div.arte-header-autopromo div.arte-header-langs ul.arte-header-lang").hide()}else{if(typeof F=="string"){f.find('div.arte-header-autopromo div.arte-header-langs ul.arte-header-lang li a[lang="'+F+'"]').parent().hide()}}return this};this.setCurrent=function(F){k.current=F;u();return this};this.hide=function(){f.hide();return this};this.show=function(){f.show();return this};this.destroy=function(){q.unbind("click");a(window).unbind("resize",x);a(".arte-header-menu li a").unbind("click");a("a.arte-header-fb").unbind("click");a("a.arte-header-tw").unbind("click");f.html("");return this}};a.fn.arteHeader=function(c){return this.each(function(){var e=a(this);if(e.data("plugin-arte-header")){return}var d=new b(this,c);e.data("plugin-arte-header",d);e.trigger("loaded")})}})(jQuery);